(()=>{var Ht=Object.create;var xe=Object.defineProperty;var Kt=Object.getOwnPropertyDescriptor;var Bt=Object.getOwnPropertyNames;var Ft=Object.getPrototypeOf,Gt=Object.prototype.hasOwnProperty;var Yt=(t,e)=>()=>(t&&(e=t(t=0)),e);var Se=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Qt=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Bt(e))!Gt.call(t,o)&&o!==n&&xe(t,o,{get:()=>e[o],enumerable:!(r=Kt(e,o))||r.enumerable});return t};var Jt=(t,e,n)=>(n=t!=null?Ht(Ft(t)):{},Qt(e||!t||!t.__esModule?xe(n,"default",{value:t,enumerable:!0}):n,t));var l,s=Yt(()=>{l={ap1:"1.6.16",eu1:"1.6.16","eu1-b":"1.5.0-eu1b",us1:"1.6.16"}});var Pt=Se((Pi,At)=>{s();var Zn=[{name:"Chrome",flags:["isChrome"],regex:/(?:Chrome|CriOS)\/([0-9]+)\./i},{name:"Firefox",flags:["isFirefox"],regex:/Firefox\/([0-9]+)\./i},{name:"IE",flags:["isIE"],regex:/(?:MSIE|Trident.*rv)[: ]([0-9]+)\./i},{name:"Opera",flags:["isOpera"],regex:/Opera\/.*Version\/([0-9]+)/i},{name:"Safari",flags:["isSafari"],regex:/AppleWebKit\/.*Version\/([0-9]+)/i},{name:"Unknown",flags:["isUnknown"],regex:null}],er=[{name:"Motorola Razr",flags:["isTablet"],platform:"Tablet",regex:/ Android .*? Droid Razr/i},{name:"Motorola Xoom",flags:["isTablet"],platform:"Tablet",regex:/ Android .*? Xoom/i},{name:"Samsung Tablet",flags:["isTablet"],platform:"Tablet",regex:/ Android .*? (SCH-I|GT-P)/i},{name:"Android Phone",flags:["isPhone"],platform:"Phone",regex:/ Android .*? (Chrome|Version)\/[.0-9]* Mobile/i},{name:"Android Tablet",flags:["isTablet"],platform:"Tablet",regex:/ Android .*? (Chrome|Version)\/[.0-9]* (?!Mobile)/i},{name:"Firefox OS",flags:["isPhone"],platform:"Phone",regex:/Mozilla.*?Mobile.*?Gecko.*?Firefox/i},{name:"iPad",flags:["isTablet"],platform:"Tablet",regex:/iPad/i},{name:"iPhone",flags:["isPhone"],platform:"Phone",regex:/iPhone|iPod/i},{name:"BlackBerry Phone",flags:["isPhone"],platform:"Phone",regex:/BlackBerry|BB10/i},{name:"BlackBerry Playbook",flags:["isTablet"],platform:"Tablet",regex:/Playbook/i},{name:"Motorola Droid",flags:["isPhone"],platform:"Phone",regex:/(Droid|SHOLS_U2|XT[0-9]{4})/i},{name:"HTC",flags:["isPhone"],platform:"Phone",regex:/HTC One|HTC Sensation|Sprint APA9292KT/i},{name:"Kindle",flags:["isTablet"],platform:"Tablet",regex:/Silk|Kindle/i},{name:"LG",flags:["isPhone"],platform:"Phone",regex:/LG-M|LG-E|LG-P/i},{name:"Nexus Phone",flags:["isPhone"],platform:"Phone",regex:/Nexus 4|Nexus 5|Nexus S/i},{name:"Nexus Tablet",flags:["isTablet"],platform:"Tablet",regex:/Nexus 7|Nexus 10/i},{name:"Nokia",flags:["isPhone"],platform:"Phone",regex:/Nokia|Windows Phone/i},{name:"Samsung Phone",flags:["isPhone"],platform:"Phone",regex:/SM-N900|GT-I|GT-N|SAMSUNG-SGH|SAMSUNG SCH/i},{name:"Sony",flags:["isPhone"],platform:"Phone",regex:/LT28|SonyEricsson|Sony/i},{name:"PC",flags:["isDesktop"],platform:"Desktop",regex:null}];function tr(t,e){Zn.some(function(n){var r=null;if(!n.regex||(r=n.regex.exec(e)))return t.browser=n.name,n.flags.forEach(function(o){t[o]=!0}),t.version=r&&r.length>0?Number(r[1]):0,e.indexOf("Trident/4")!==-1&&t.version<8&&(t.version=8),e.indexOf("Trident/5")!==-1&&t.version<9&&(t.version=9),e.indexOf("Trident/6")!==-1&&t.version<10&&(t.version=10),e.indexOf("Trident/7")!==-1&&t.version<11&&(t.version=11),!0})}function nr(t,e){er.some(function(n){if(!n.regex||n.regex.test(e))return t.device=n.name,n.flags.forEach(function(r){t[r]=!0}),t.platform=n.platform,!0})}At.exports=function(t){var e={browser:"IE",device:"PC",isChrome:!1,isDesktop:!1,isFirefox:!1,isIE:!1,isOpera:!1,isPhone:!1,isSafari:!1,isTablet:!1,isUnknown:!1,platform:"Desktop",version:0};return tr(e,t),nr(e,t),e}});var Dt=Se((Di,It)=>{s();It.exports=Pt()});s();s();function we(){try{decodeURIComponent(location.href)}catch{throw new Error("invalid UTF-8 on url-encoded query params")}}s();s();s();s();var H,Xt=new Uint8Array(16);function Z(){if(!H&&(H=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!H))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return H(Xt)}s();var p=[];for(let t=0;t<256;++t)p.push((t+256).toString(16).slice(1));function Ee(t,e=0){return p[t[e+0]]+p[t[e+1]]+p[t[e+2]]+p[t[e+3]]+"-"+p[t[e+4]]+p[t[e+5]]+"-"+p[t[e+6]]+p[t[e+7]]+"-"+p[t[e+8]]+p[t[e+9]]+"-"+p[t[e+10]]+p[t[e+11]]+p[t[e+12]]+p[t[e+13]]+p[t[e+14]]+p[t[e+15]]}s();s();var Zt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ee={randomUUID:Zt};function en(t,e,n){if(ee.randomUUID&&!e&&!t)return ee.randomUUID();t=t||{};let r=t.random||(t.rng||Z)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let o=0;o<16;++o)e[n+o]=r[o];return e}return Ee(r)}var R=en;s();var te="__DF_DEBUG_MODE__",Te="true",O=window.sessionStorage;function ke(){O.setItem(te,Te)}function Ce(){O.removeItem(te)}function tn(){return O.getItem(te)===Te}function K(t){return O.getItem(t)||window[t]}function B(t,e){O.setItem(t,e)}function d(...t){tn()&&console.log("[doofinder]",...t)}s();s();var Ae={canPushState(){return typeof history.pushState<"u"},dropLocal(t,e,n){return t.removeItem(this.localKey(e,n))},updateLocal(t,e,n,r,o){let i=this.getLocal(t,e,n),a=this.localKey(e,n),c=i===null?r:o(i);return t.setItem(a,JSON.stringify(c)),c},getLocal(t,e,n){return JSON.parse(t.getItem(this.localKey(e,n)))},updateCurrentState(t){this.canPushState()&&history.replaceState(t(history.state||{}),"",window.location.href)},pushState(t,e,n){if(this.canPushState()){if(n!==window.location.href){if(e.type=="redirect"&&e.scroll){let o=history.state||{};o.scroll=e.scroll,history.replaceState(o,"",window.location.href)}delete e.scroll,history[t+"State"](e,"",n||null);let r=this.getHashTargetEl(window.location.hash);r?r.scrollIntoView():e.type==="redirect"&&window.scroll(0,0)}}else this.redirect(n)},setCookie(t,e){document.cookie=`${t}=${e}`},getCookie(t){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${t}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(t,e){e&&Ae.setCookie("__phoenix_flash__",e+"; max-age=60000; path=/"),window.location=t},localKey(t,e){return`${t}-${e}`},getHashTargetEl(t){let e=t.toString().substring(1);if(e!=="")return document.getElementById(e)||document.querySelector(`a[name="${e}"]`)}},ne=Ae;s();var re="df-cookies-allowed",oe=window.localStorage;function ie(){oe.setItem(re,"true")}function Pe(){oe.removeItem(re)}function Ie(){return JSON.parse(oe.getItem(re)||"false")}var De="df",Le=window.localStorage;function x(t,e=Le){return ne.getLocal(e,De,t)}function _(t,e,n=Le){return Ie()?ne.updateLocal(n,De,t,e,()=>e):null}var Oe=24*60*60*1e3,Ue="random-userid",A="session",se="apps",Re="tab-id";function Me(){return{id:R().replaceAll("-",""),expiry:new Date().getTime()+Oe,live:[]}}function U(){let t=x(A);return(!t||$e(t.expiry))&&(t=Me()),_(A,t)}function $e(t){return t<new Date().getTime()}function nn({id:t,expiry:e,live:n}){return/^[0-9a-fA-F]{32}$/.test(t)&&!$e(e)&&Array.isArray(n)}function F(){let t=Me();return _(A,t)}function ae(){_(Ue,R())}var h={getUserId(){return x(Ue)||ae()},getSessionId(){d("[session][getSessionId()] called!");let t=U();return t?t.id:null},getTabId(){d("[session][getTabId()] called!");let t=window.sessionStorage;return x(Re,t)||_(Re,R().replaceAll("-",""),t)},setLive(t){d("[session][setLive()] called!",t);let e=U();if(e===null)return null;e.live.includes(t)||e.live.push(t),e.expiry=new Date().getTime()+Oe,_(A,e),_(se,e.live.join())},removeLive(t){d("[session][removeLive()] called!",t);let e=U();if(e===null)return null;e.live=e.live.filter(n=>n!==t),_(A,e),_(se,e.live.join())},getLastUsedApps(){return x(se)||""},isLive(...t){let e=U();return e===null?!1:t.some(r=>e.live.includes(r))},getSessionObject(){return U()},setSessionObject(t){nn(t)?_(A,t):console.error("[session][setSessionObject()] session object is not valid")}};s();function rn(){return{"content-type":"application/json"}}async function G(t,e={}){return(await fetch(t,{method:"GET",cache:"no-cache",mode:"cors",headers:rn(),...e})).json()}var Y=class{constructor(e){this.zone=e}async add(e,n,{id:r,title:o,price:i},a=1){let c=`${this.url(e)}/cart/${h.getSessionId()||""}`,f=JSON.stringify({amount:a,id:r,title:o,price:i,index:n});return G(c,{method:"PUT",body:f})}async remove(e,n,r,o=1){let i=`${this.url(e)}/cart/${h.getSessionId()||""}`,a=JSON.stringify({amount:o,id:r,index:n});return G(i,{method:"PATCH",body:a})}async clear(e){let n=`${this.url(e)}/cart/${h.getSessionId()||""}`;return G(n,{method:"DELETE"})}async checkout(e){let n=JSON.stringify({session_id:h.getSessionId(),user_id:h.getUserId(),sources:h.getLastUsedApps().split(",")});return G(`${this.url(e)}/checkout`,{method:"PUT",body:n})}url(e){return`https://${this.zone}-search.doofinder.com/6/${e}/stats`}};s();function Ne(t){return B("__DF_CDN_PREFIX__",t)}s();function je(t){return B("__DF_LAYER_SERVER__",t)}s();s();async function M(t,e,n=!1){if(!document.querySelector(`script[src="${t}"]`)){let r=document.createElement("script");r.src=t,r.async=1,n&&(r.type="module"),e&&(r.onerror=()=>M(e)),document.head.appendChild(r)}}async function qe(t,e){M(t,e,!0)}async function Ve(t){if(!document.querySelector(`link[rel="modulepreload"][href="${t}"]`)){let e=document.createElement("link");e.setAttribute("rel","modulepreload"),e.setAttribute("href",t),e.onerror=()=>{M(t,null,!0)},document.head.appendChild(e)}}async function ce(t,e){if(!document.querySelector(`link[rel="stylesheet"][href="${t}"]`)){let n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),e&&(n.onerror=()=>ce(e)),document.head.appendChild(n)}}async function T(t){if(t=(t||"").trim(),!on(t)){let e=document.createElement("style");e.appendChild(document.createTextNode(t)),document.head.appendChild(e)}}function on(t){return Array.from(document.head.querySelectorAll("style")).some(e=>e.textContent.trim()===t)}s();s();var P=class{constructor(e={}){e=Object.assign({resolveTimeout:null,resolveValue:!0,rejectTimeout:null,rejectValue:!1},e),this._promise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.then=this._promise.then.bind(this._promise),this.catch=this._promise.catch.bind(this._promise),this.finally=this._promise.finally.bind(this._promise),this[Symbol.toStringTag]="Promise";let{resolveTimeout:n,resolveValue:r,rejectTimeout:o,rejectValue:i}=e;n&&setTimeout(()=>this.resolve(r),n),o&&setTimeout(()=>this.reject(i),o)}get promise(){return this._promise}};s();s();var v=new Promise((t,e)=>{document.readyState!="loading"?t():document.addEventListener("DOMContentLoaded",()=>{t()})});var I="quiz";function sn(t){return[I,{quiz_id:t.quiz_id}]}function an(t,e,n){let r=n.find(i=>i.name==I&&i.quiz_id==e.quiz_id);if(!r)return console.error(`Doofinder app '${I}' not enabled or wrong quiz_id`),null;let o={quiz_id:e.quiz_id,trigger:e.trigger||r.options.trigger,hashid:r.overrides.hashid,custom_css:r.overrides.custom_css,hooks:e.hooks,account_code:t.account_code};return{...t,...o}}function cn(t,e,n){let r=e[I],o=r.vsn?.[t.zone];return{assets:r[t.device],cdn_prefix:e[I].cdn_prefix,cdn_fallback:r.cdn_fallback,vsn:o,appConfig:t,onRegister:function(i){v.then(()=>{let a=i.create(t);typeof n=="function"&&n(a)})}}}var le={appName:I,backendAppToScriptApp:sn,buildConfig:an,buildSettingsConfig:cn};s();s();s();function ze(t,e={}){let n=document.querySelector(t);return n?Promise.resolve(n):new Promise((r,o)=>{let i=0,a=null,c=e.interval||500,f=e.times||10;a=setInterval(function(){i++<f?(n=document.querySelector(t),n&&(clearInterval(a),r(n))):(clearInterval(a),o(`selector '${t}' not found`))},c)})}var He=3,Ke="df:trigger:click",ln="df:trigger:focus",un="df:trigger:input",Be="df:trigger:submit",Q=class{constructor(e){this._minCaptureLength=He,this._elementSelector=e,this.__chooseTriggerElement__(e),this._eventBus=null,this._eventsQueue=[],this._events=[["click",this.handleClick.bind(this),!0],["focus",this.handleFocus.bind(this),!0],["input",this.handleInput.bind(this),!1],["submit",this.handleSubmit.bind(this),!0],["keypress",this.handleKeypress.bind(this),!0],["keyup",this.handleKeypress.bind(this),!0],["keydown",this.handleKeypress.bind(this),!0]],this._handleSubmit=!1,this._enabled=!1,this._redirection=null}__chooseTriggerElement__(e){this._element=Array.from(document.querySelectorAll(e)).find(n=>n.offsetWidth>0&&n.offsetHeight>0)}async updateQuery(e=""){let n=await this.getElement();n instanceof HTMLInputElement&&(n.value=e)}async focus(){let e=await this.getElement();e instanceof HTMLInputElement&&e.focus()}setCaptureLength(e){this._minCaptureLength=e||He}async getElement(){if(!(!this._enabled||!this._elementSelector)){if(!this._element)try{this._element=await ze(this._elementSelector)}catch{this._element=void 0}return this._element}}get enabled(){return this._enabled}set enabled(e){if(this._enabled!==!!e){this._enabled=!!e;let n=document[`${this._enabled?"add":"remove"}EventListener`];this._events.forEach(r=>n(...r))}}get captureSubmit(){return this._handleSubmit}set captureSubmit(e){this._handleSubmit=!!e}get redirection(){if(this._redirection)return{...this._redirection}}set redirection(e){this._redirection=e}setEventBus(e){this._eventBus=e}flushMessages(){if(this._eventsQueue=[...new Map(this._eventsQueue).entries()],this._eventsQueue.length>0){let e=this._eventsQueue.shift();for(;e&&e.length===2;)d("trigger:emit",e),this._eventBus?.emit(...e),e=this._eventsQueue.shift()}else document.activeElement===this._element&&this.notify(Ke,this.getPayload())}destroy(){this._events.forEach(e=>window.removeEventListener(...e))}shouldHandle(e){let n=this.getElementFromEvent(e);return n?(this._element=n,!0):!1}getPayload(e){let n={source:this._element,originalEvent:e};if(this._element instanceof HTMLInputElement){let r=this._element.value.trim();(r.length>=this._minCaptureLength||e?.type==="keydown")&&(n.query=r)}return n}getElementFromEvent(e){if(!e.target||e.target===document||e.target===window)return;let n=e.type==="submit"?"querySelector":"closest",r=e.target[n](this._elementSelector);if(r&&!r.closest("[dfd-hook]"))return r}handleClick(e){this.shouldHandle(e)&&(e.preventDefault(),e.stopImmediatePropagation(),this.notify(Ke,this.getPayload(e)))}handleFocus(e){this.shouldHandle(e)&&(e.stopImmediatePropagation(),this.notify(ln,this.getPayload(e)))}handleInput(e){this.shouldHandle(e)&&this.notify(un,this.getPayload(e))}handleSubmit(e){this._handleSubmit&&this.shouldHandle(e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.notify(Be,this.getPayload(e)))}handleKeypress(e){e.key==="Enter"&&this.shouldHandle(e)&&(this._redirection||this._handleSubmit)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this._redirection?window.location=this._redirection.url:e.type==="keydown"&&this.notify(Be,this.getPayload(e)))}notify(e,n){this._eventBus?this._eventBus.emit(e,n):this._eventsQueue.push([e,n]),d("[trigger]",this._eventBus?"[emit]":"[queue]",e,n)}};var $="layer";function dn(t){return[$,{}]}function fn(t,e,n){let r=n.find(a=>a.name==$);if(!r)return console.error(`Doofinder app '${$}' not enabled`),null;let o=r.overrides.autoload,i={trigger:e.trigger||r.options.trigger,url_hash:e.url_hash||e.url_hash===void 0&&r.options.url_hash,hooks:e.hooks,params:e.params,search_query_retention:r.overrides.search_query_retention,sort:e.sort,layout:r.overrides.layout,custom_css:r.overrides.custom_css[t.device],custom_properties:r.overrides.custom_properties[t.device],autoload:o&&o[t.device],type:r.type,exportResultsData:e.exportResultsData,zone:e.zone||r.options.zone||t.zone};return{...t,...i}}function mn(t,e,n){let r=e[$],o=t.device=="mobile"?r.mobile:r.desktop[t.layout];t=ue(t);let i=t.custom_properties?.join(`
`),a=r.vsn?.[t.zone];return{assets:o,cdn_prefix:r.cdn_prefix,cdn_fallback:r.cdn_fallback,vsn:a,appConfig:t,onRegister:function(c){v.then(()=>{let f=c.create(t);T(`#${f.mount.id} {
${i||""}
}`),typeof n=="function"&&n(f)})}}}function ue(t){return t.trigger=hn(t.trigger,t.autoload),t.urlHash=t.url_hash||!1,t.searchQueryRetention=t.search_query_retention,t.layerType=t.layerType||"search",t.installationId=t.store,t}function hn(t,e){let n=new Q(t);return n.enabled=!e||e.trigger,n}var de={appName:$,backendAppToScriptApp:dn,buildConfig:fn,buildSettingsConfig:mn};s();var N="chat";function pn(t){return[N,{chat_id:t.chat_id}]}function gn(t,e,n){let r=n.find(i=>i.name==N&&i.chat_id==e.chat_id);if(!r)return console.error(`Doofinder app '${N}' not enabled or wrong chat_id`),null;let o={chat_id:e.chat_id,id:e.id||r.options.id,zone:e.zone||t.zone,trigger:e.trigger||!0,label:e.label,extra_params:e.extra_params||{},meta:e.meta||{}};return{...t,...o}}function _n(t,e,n){let r=e[N],o=r.vsn;return{assets:r[t.device],cdn_prefix:r.cdn_prefix,cdn_fallback:r.cdn_fallback,vsn:o,appConfig:t,onRegister:function(a){v.then(()=>{let c=a.create(t);typeof n=="function"&&n(c)})}}}var fe={appName:N,backendAppToScriptApp:pn,buildConfig:gn,buildSettingsConfig:_n};s();s();function Ge(t){let{hashid:e,url_patterns:n}=t,r=window.location.toString();d("[category merchandising] finding any matching URL pattern configuration for hashid: ",e," url patterns: ",n," URL: ",r);try{let o=yn(e,n,r);return d("[category merchandising] URL Pattern configuration found ",o),!!o}catch(o){return d("[category merchandising] error when matching URL Pattern. Error: ",o),!1}}function yn(t,e,n){let r=e.filter(o=>o.hashid===t).find(o=>{let i=Fe(o);return[...n.matchAll(i)].length>0});return r||e.filter(o=>!o.hashid).find(o=>{let i=Fe(o);return[...n.matchAll(i)].length>0})}function Fe(t){let[,,e,n]=t.pattern.match(/(\/?)(.+)\1([a-z]*)/i);n=n||"g";let r=new RegExp(e,n);return d("pattern ",e,"flags",n,"regexp",r),r}var j="category_merchandising";function vn(t){return[j,{}]}function bn(t,e,n){let r=n.find(a=>a.name==j);if(!r)return console.error(`Doofinder app '${j}' not enabled`),null;let o=r.devices[t.device],i={insertion_point:e.insertion_point||o.options.insertion_point,url_hash:e.url_hash||!1,search:e.search||r.options.search,sort:e.sort||{},hooks:e.hooks,custom_css:o.overrides.custom_css,custom_properties:o.overrides.custom_properties,autoload:o.overrides.autoload,url_patterns:e.url_patterns||r.options.url_patterns,type:"category_pages",zone:e.zone||r.options.zone||t.zone};return{...t,...i}}function xn(t,e,n){if(!Ge(t))return null;let r=e[j],o=r.vsn?.[t.zone],i=r[t.device??"desktop"];t.layerType="category_pages",t=ue(t);let a=t.custom_properties?.join(`
`);return{assets:i,cdn_prefix:r.cdn_prefix,cdn_fallback:r.cdn_fallback,vsn:o,appConfig:t,onRegister:function(c){v.then(()=>{let f=c.create(t);T(`#${f.mount.id} {
${a||""}
}`),typeof n=="function"&&n(f)})}}}var me={appName:j,backendAppToScriptApp:vn,buildConfig:bn,buildSettingsConfig:xn};s();var q="recommendations_widgets";function Sn(t){return[q,{}]}function wn(t,e,n){let r=n.find(a=>a.name==q);if(!r)return console.error(`Doofinder app '${q}' not enabled`),null;let o=An(t,e,r),i=Tn(o);return{...o,custom_css:r.overrides.custom_css,widgets:[...Cn(i,o),...kn(o)]}}function En(t,e,n){if(t.widgets.length===0)return null;let r=e[q];return{assets:r[t.device],cdn_prefix:r.cdn_prefix,vsn:r.vsn,appConfig:t,onRegister:function(o){v.then(()=>{for(let i of t.widgets){if(!i.hashids.includes(t.hashid))continue;let{_widgets:a,...c}=t;o.create({...c,widget:i})}})}}}async function Qe(t,e){if(!t.includes("recommendations"))return;let r=new MutationObserver(()=>{r.disconnect(),e(),r.observe(document,{childList:!0,subtree:!0})});r.observe(document,{childList:!0,subtree:!0})}var he={appName:q,backendAppToScriptApp:Sn,buildConfig:wn,buildSettingsConfig:En};function Tn({pageTypeMappings:t}){let e=window.location.href;return t.reduce((n,r)=>{let{match_conditions:o}=r;return o.length===0?n:o.some(i=>Pn(e,i))?[r,...n]:n},[])}function kn({widgets:t}){return t.filter(e=>!e.page_type_id)}function Cn(t,{widgets:e,overridePageTypeCheck:n}){if(n)return e;let r=t.map(o=>o.id);return e.filter(o=>r.includes(o.page_type_id))}function An(t,e,n){let r=In(e);if(r.length>0){let i=r.map(a=>{let c=n.widgets.find(f=>f.widget_id===a.widget_id);if(c)return{...a,id:a.widget_id,page_type_id:c.page_type_id,insertion_point:a.insertion_point||c.options.insertion_point,insertion_method:a.insertion_method||c.options.insertion_method,hashids:c.overrides.hashids};console.error(`Custom recommendations widget '${a.widget_id}' does not exist`)}).filter(a=>!!a);return{...t,widgets:[...i],overridePageTypeCheck:!0}}let o=n.widgets.map(i=>({id:i.widget_id,page_type_id:i.page_type_id,insertion_point:i.options.insertion_point,insertion_method:i.options.insertion_method,hashids:i.overrides.hashids}));return{...t,widgets:o,overridePageTypeCheck:!1}}function Pn(t,{match_type:e,value:n}){switch(e){case"equals":return Ye(t)==Ye(n);case"contains":return t.includes(n);case"starts_with":return t.startsWith(n);case"regex":try{return new RegExp(n,"i").test(t)}catch{return!1}default:return!1}}function Ye(t){try{let e=new URL(t);return e.origin+e.pathname}catch{return t}}function In(t){return t?Array.isArray(t)?[...t]:Object.hasOwn(t,"widget_id")?[{...t}]:[]:[]}var Dn=de.appName,Je=me.appName,J=fe.appName,Ln=le.appName,W=he.appName,We={LAYER:Dn,CHAT:J,QUIZ:Ln,RECOMMENDATIONS_WIDGETS:W},Xe=[J,W];function Ze(t){return t.reduce(function(e,n){return e[n]=new P,e},{})}function et(t){return async function(e,n){if(!t[e])throw new Error(`unknown "${e}" app!`);n(await t[e])}}function tt(t,e){document.dispatchEvent(new CustomEvent("doofinder.register",{detail:{name:t,entrypoint:e}}))}function X(t){return[me,de,le,fe,he].find(e=>e.appName===t)}s();var V=".min",b="https://cdn.doofinder.com";function Rn(t){switch(t){case J:return"0.1.5-lv1.0.2";case W:return"0.1.4-lv1.0.2";default:return"0"}}var w=`/js/dflayer${V}.js`,E="/css/2/common.css",nt={js:[`/quiz${V}.js`],css:["/quiz.css"]},rt={mjs:[`/recommendations${V}.js`],css:["/recommendations.css"]};function it(t){return`${b}/live_view_portal/${Rn(t)}/live_view_portal${V}.js`}var ot={mjs:[`/chat${V}.js`],css:["/chat.css"]},pe=typeof l>"u"?{ap1:"0",eu1:"0",us1:"0","eu1-b":"0"}:l,On="0.2.25",Un="0.3.4",st=[{vsn:"1.0",layer:{cdn_prefix:b+"/livelayer",cdn_fallback:b+"/livelayer/1",desktop:{Fullscreen:{js:[w],css:[E,"/css/2/fullscreen.css"]},AIFullscreen:{js:[w],css:[E,"/css/2/ai_fullscreen.css"]},Embedded:{js:[w],css:[E,"/css/2/embedded.css"]},Floating:{js:[w],css:[E,"/css/2/classic.css"]},FloatingEmbedded:{js:[w],css:[E,"/css/2/classic.css","/css/2/embedded.css"]}},mobile:{js:[w],css:[E,"/css/2/mobile.css"]},vsn:pe},category_merchandising:{cdn_prefix:b+"/livelayer",cdn_fallback:b+"/livelayer/1",desktop:{js:[w],css:[E,"/css/2/embedded.css"]},mobile:{js:[w],css:[E,"/css/2/mobile_embedded.css"]},vsn:pe},quiz:{cdn_prefix:b+"/quiz",cdn_fallback:b+"/quiz",desktop:nt,mobile:nt,vsn:pe},chat:{cdn_prefix:b+"/chat",cdn_fallback:b+"/chat",desktop:ot,mobile:ot,vsn:On},recommendations_widgets:{cdn_prefix:b+"/recommendations-v2/lv",desktop:rt,mobile:rt,vsn:Un}}];s();function at(t,e,n=""){let r=K("__DF_CDN_PREFIXES__");return r&&r[t]?r[t]:`${e}${n!=""?"/":""}${n}`}function ct(t,e,n,r,o,i){let a=st[0],c=X(n);if(!c)return console.error(`Doofinder app '${n}' not found`),null;let f=c.buildConfig(e,r,o.apps);if(!f)return console.error(`Doofinder app '${n}' not enabled`),null;let g=c.buildSettingsConfig(f,a,i);if(!g)return null;let C=n==Je?"layer":n;return t(C,g.onRegister),Mn(n,g.assets,g.cdn_prefix,g.vsn,g.appConfig.custom_css,g.cdn_fallback),g.appConfig}async function Mn(t,e,n,r,o,i){let a=at(t,n,r),c=r?`?v=${r}`:"";ge(a,c,i,M,e.js),ge(a,c,i,qe,e.mjs),ge(a,c,i,ce,e.css),o&&Array.isArray(o)?o.forEach(T):o&&T(o)}async function ge(t,e,n,r,o){o&&o.forEach(i=>r(`${t}${i}${n?"":e}`,n?`${n}${i}${e}`:void 0))}s();async function lt(t,e){let n=$n(t,e),r=await fetch(n);if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);return await r.json()}function $n(t,e){let n=K("__DF_STORE_CONFIG__"),r="",o={eu1:"eu-west-1.",us1:"us-east-1.",ap1:"ap-southeast-1."};switch(e=Object.hasOwn(o,e)?e:"eu1",n){case"provisional-bucket":r=`provisional-${e}-df-store-config-files`;break;case"production-bucket":r+=`${e}-df-store-config-files`;break;case"test":return`http://appsloader/store-configs/${e}/${t}.json`;case"local-directory":break;default:r=`${e}-df-store-config-files`}return`https://${r}.s3.${o[e]}amazonaws.com/${t}.json`}s();s();function _e(t){let e=t?.replaceAll("_","-").trim().split("-")||[];function n(r){return r?`-${r.toUpperCase()}`:""}if(e.length<3){let[r,o]=e;return`${r?.toLowerCase()}${n(o)}`}else{let[r,o,i]=e;return`${r?.toLowerCase()}-${o.toUpperCase()}${n(i)}`}}function ut(t){return t?.trim().toUpperCase()}function ft(t,e){let{currency:n,hashid:r}=t,o=t.language||document.documentElement.getAttribute("lang"),i=!!o,a=!!n,c=!!r;return i&&!a&&!c?mt(o,e):!i&&a&&!c?k(e):i&&a&&!c?ht(o,n,e):!i&&!a&&c?dt(r,e):i&&!a&&c?Nn(o,r,e):!i&&a&&c?dt(r,e):i&&a&&c?jn(o,n,r,e):k(e)}function k(t){return{language:t.defaults.language,currency:t.defaults.currency,hashid:t.defaults.hashid}}function mt(t,e){let n=_e(t),r=e.search_engines;if(r[n]||(n=pt(r,n)),!n||!r[n])return k(e);let o=Object.keys(r[n]);if(!o.length)return k(e);let i=o[0],a=r[n][i];return{language:n,currency:i,hashid:a}}function ht(t,e,n){let r=_e(t),o=n.search_engines;if(o[r]||(r=pt(o,r)),!r||!o[r])return k(n);let i=ut(e),a=Object.keys(o[r]),c=i;if(a.includes(i)||(c=a[0]),!c)return k(n);let f=o[r][c];return{language:r,currency:c,hashid:f}}function dt(t,e){return ye(t,e)||k(e)}function Nn(t,e,n){return ye(e,n)||mt(t,n)}function jn(t,e,n,r){return ye(n,r)||ht(t,e,r)}function ye(t,e){let n=Vn(t,e.search_engines);return n?{language:n.language,currency:n.currency,hashid:t}:null}function pt(t,e){let[n]=e.split("-");if(t[n])return n;let r=Object.keys(t).filter(o=>qn(o,n)).shift();return t[r]?r:null}function qn(t,e){let[n]=t.split("-");return n===e}function Vn(t,e){for(let[n,r]of Object.entries(e))for(let[o,i]of Object.entries(r))if(i===t)return{language:n,currency:o};return null}s();s();function z(t){return`https://${t}-api.doofinder.com`}s();async function D(t,e){let r={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)};return r.mode="cors",await fetch(t,r)}async function gt(t){t.hashid?(d("[loader]","[loader]","Registering visit",window.location.href),D(`${z(t.zone)}/api/v2/stats/visit`,{session_id:h.getSessionId(),user_id:h.getUserId(),store:t.store,hashid:t.hashid,url:window.location.href})):d("[loader]","No hashid. Skipping register visit")}s();s();function _t(t){return`https://${t}-admin.doofinder.com`}var zn=3;async function xt(t){if(t.registerCheckouts){let e="",n=new MutationObserver(async function(o){e=await yt(e,t)}),r={subtree:!0,childList:!0};n.observe(document,r),e=await yt(e,t)}}async function yt(t,e){if(window.location.href.split("#")[0]!==t){let n=window.location.pathname,r=window.location.href,o=bt(e.checkout_confirmation_urls,n,r),i=bt(e.checkout_summary_urls,n,r);d("[checkout][logic] isCheckoutUrl",o),d("[checkout][logic] isCheckoutCartUrl",i),o&&Kn(e),i&&St(e),t=window.location.href.split("#")[0]}return t}async function Hn(t,e){setTimeout(async()=>{d(`[checkout] Try number ${e}`);try{await t()}catch(n){d(`[checkout] Try number ${e} failed:`,n)}},2500)}async function St(t,e=0){let n=t.hashid,r=t.checkout_css_selector;if(r==null){let i=await D(`${_t(t.zone)}/api/introspection/checkout`,{html_content:vt(document.documentElement.outerHTML),hashid:n});if(!i.ok||(i=await i.json(),r=i.checkout_html?.products,!r))return}if(r===""){d("The provided CSS selector is an empty string");return}let o=document.querySelector(r);if(!o&&e>=zn){d(`Cannot find element in DOM with CSS Selector ${r} after ${e} retries.`);return}else if(!o)return Hn(async()=>St(t,e+1),e+1);D(`${z(t.zone)}/api/v2/stats/carts`,{hashid:n,session_id:h.getSessionId(),user_id:h.getUserId(),checkout_html:vt(Fn(o.outerHTML))})}async function Kn(t){let e=t.hashid;D(`${z(t.zone)}/api/v2/stats/sales`,{hashid:e,session_id:h.getSessionId(),user_id:h.getUserId(),has_init:h.isLive("layer")}),document.dispatchEvent(new CustomEvent("doofinder.layer.checkout",{detail:{tag:{_hashid:e},url:window.location.href}})),F()}function vt(t){let e=new TextEncoder().encode(t),n=Array.from(e,r=>String.fromCharCode(r)).join("");return btoa(n)}function Bn(t){return new RegExp(t.replaceAll("?","\\?").replaceAll(".","\\.").replaceAll("*",".*"))}function Fn(t){return t.replace(/<!--[\s\S]*?-->/g,"")}function bt(t,e,n){return t.filter(r=>r&&r.value&&r.value!=="").some(r=>{d("[checkout][anyUrlMatches] Checking checkout url for",r);let o=Bn(r.value),i=(()=>{switch(r.match_type){case"contains":return e.includes(r.value)||n.includes(r.value);case"equals":return e==r.value||n==r.value;case"regex":return o.test(e)||o.test(n);case"starts_with":return e.startsWith(r.value)||n.startsWith(r.value);default:return!1}})();return d(`[checkout][anyUrlMatches] Result for ${r.match_type}:`,i),i})}s();var wt=new Set;async function Tt(t){if(!t.ga4_integration)return;let e="";new MutationObserver(async function(){e=await Et(e)}).observe(document,{subtree:!0,childList:!0}),e=await Et(e)}async function Et(t){let e=window.location.href.split("#")[0];return e!==t&&!wt.has(e)&&(Yn(),wt.add(e)),e}function Gn(){if(!(typeof window.gtag<"u")){if(typeof window.dataLayer>"u"){d("[ga4Integration][verification] Bad configuration for analytics");return}window.gtag=function(t,e,n){t==="event"&&typeof e=="string"&&typeof n=="object"?window.dataLayer.push({event:e,...n}):window.dataLayer.push(arguments)}}}function Yn(){Gn(),document.addEventListener("doofinder.layer.search",t=>{window.search_timer&&clearTimeout(window.search_timer),window.search_timer=setTimeout(()=>{window.gtag("event","doofinder_search",{hashid:t.detail.tag._hashid,search_term:t.detail.query}),window.search_timer=null},1e3)}),document.addEventListener("doofinder.layer.itemClick",t=>{window.gtag("event","doofinder_view_item",{hashid:t.detail.tag._hashid,url:t.detail.url})}),document.addEventListener("doofinder.layer.checkout",t=>{window.gtag("event","doofinder_checkout",{hashid:t.detail.tag._hashid,url:t.detail.url})})}s();var kt="previous-kv-userid",ve="previous-kv-email";function Ct(t){window.addEventListener("load",function(){Qn(t)})}async function Qn(t){if(Jn(t)&&typeof window.klaviyo<"u"&&typeof window.dfKvCustomerEmail<"u"&&window.dfKvCustomerEmail){let e=window.dfKvCustomerEmail;if(!e)return;let n=await window.klaviyo.account(),r=h.getUserId();if(!Wn(r,e))return;Xn(e),r=h.getUserId(),_(kt,r),_(ve,e),window.klaviyo.identify({email:e});try{let o=await fetch("https://a.klaviyo.com/client/events?company_id="+n,{method:"POST",headers:{accept:"application/vnd.api+json",revision:"2025-01-15","content-type":"application/vnd.api+json"},body:JSON.stringify({data:{type:"event",attributes:{properties:{connection:"Done"},metric:{data:{type:"metric",attributes:{name:"Connected to Doofinder"}}},profile:{data:{type:"profile",attributes:{email:e,properties:{external_id:r}}}}}}})});o.ok||console.warn("Failed to send data to Klaviyo:",await o.text())}catch(o){console.warn("Failed to send data to Klaviyo:",o)}}}function Jn(t){return Array.isArray(t.integrations_list)&&t.integrations_list.includes("klaviyo")}function Wn(t,e){let n=x(kt),r=x(ve);return n===null||n!==t||r===null||r!==e}function Xn(t){let e=x(ve);e!==null&&e!==t&&(F(),ae())}s();var Lt=Jt(Dt());function Rt(){let{isPhone:t}=(0,Lt.default)(navigator.userAgent);return t?"mobile":"desktop"}s();function Ot(t){return t.map(e=>{let n=X(e.name);return n?n.backendAppToScriptApp(e):(console.error(`Doofinder app '${e.name}' not found`),!1)}).filter(e=>e)}var Ut=!1;function Mt(t,e,n,r){if(Ut)throw new Error("Doofinder already exists!");{let C=function(u){let m=f.settings,y=ft(u,m);d("[loader]","Resolved search engine",y);let S=u.register_visits||u.register_visits===void 0&&m.register_visits,Vt=u.register_checkouts||u.register_checkouts==null&&m.register_checkouts,zt=u.require_cookies_consent||u.require_cookies_consent===void 0&&m.require_cookies_consent;i={...u,...y,pageTypeMappings:m.page_type_mappings||[],registerVisits:S,registerCheckouts:Vt,device:u.device||Rt(),account_code:m.account_code,require_cookies_consent:zt,checkout_confirmation_urls:m.checkout_confirmation_urls||[],checkout_summary_urls:m.checkout_summary_urls||[],checkout_css_selector:m.checkout_css_selector,ga4_integration:m.ga4_integration,integrations_list:m.integrations_list||[]}},L=function(u,m,y=null){let S=ct(c,i,u,m,f,y);S&&(a[u]||(a[u]=[]),a[u].push(S))},Nt=function(){let u=jt().filter(([m])=>!n.includes(m));qt(u),u.forEach(m=>{L(...m),Qe(m,()=>L(...m))})},jt=function(){if(i.apps==!1)return e;let u=e.map(S=>S[0]),m=f.apps.filter(S=>!u.includes(S.name)),y=Ot(m);return e.concat(y)},qt=function(u){u.forEach(m=>{let y=m[0];Xe.includes(y)&&Ve(it(y))})};Ut=!0;let o={},i={},a={},c,f,g=new P;o=Ze(Object.values(We)),c=et(o),document.addEventListener("doofinder.register",u=>{let{name:m,entrypoint:y}=u.detail;o[m].resolve(y)});async function be(u){f=u[0],C(t),i.require_cookies_consent||ie(),h.getSessionId(),h.getUserId(),h.getTabId(),_("script-version","2.0"),g.resolve(!0),d("[loader]","Doofinder ready. Apps will be initialized now."),Nt(),i.registerVisits&&(gt(i),_("hashid",i.hashid)),xt(i),Tt(i),Ct(i)}return r?be(r):lt(t.store,t.zone).then(u=>{be(u)}).catch(u=>{Object.seal(u),g.reject(u)}),{get Session(){return h},getApp(u){return a[u]},getRegistry(u){return o[u]},buildCart(u){return new Y(u)},ready(){return g.promise},enableCookies:ie,disableCookies:Pe,enableDebug:ke,disableDebug:Ce,setLayerServerUrl:je,setCDNServerUrl:Ne,init:L,configure:C,registerApp:tt}}}s();function $t(){let t=window.DoofinderAppsObject,e=window[t].q,n={},r=[],o=[],i=null,a;for(;a=e.shift();){let[c,f,g,C]=a;if(c==="config")f==="settings"?i=g:n[f]=g;else if(c==="init")r.push([f,g,C]);else if(c==="disable"&&Array.isArray(f))for(let L of f)o.push(L)}return{config:n,apps:r,disabledApps:o,scriptStoreConfig:i}}if(window.DoofinderStarted===void 0){window.DoofinderStarted=!0,we();let{config:t,apps:e,disabledApps:n,scriptStoreConfig:r}=$t(),o=Mt(t,e,n,r);Object.defineProperty(window,"Doofinder",{value:o,writable:!1})}else console.warn("Multiple Doofinder single scripts detected. Only one will be executed.");})();
/*! Bundled license information:

useragent-lite/lib/useragent-lite.js:
  (**
   *
   * @package     useragent-lite
   * @version     0.0.2
   * @copyright   Copyright (c) 2014 - All rights reserved.
   * @license     MIT License
   * @author      Mark Florence <mflo999@gmail.com>
   * @link        http://mflo.info
   *
   *)

useragent-lite/index.js:
  (**
   *
   * @package     useragent-lite
   * @version     0.0.2
   * @copyright   Copyright (c) 2014 - All rights reserved.
   * @license     MIT License
   * @author      Mark Florence <mflo999@gmail.com>
   * @link        http://mflo.info
   *
   *)
*/
